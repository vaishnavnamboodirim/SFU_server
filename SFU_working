function onConnect() {
  initConfig();

  streamHandler = new StreamHandler(settings.mode, config, createViewer);

  // Subscribe connected event from stream handler
  streamHandler.addEventListener("connected", function (e) {
    console.log("connected");
    onConnected();

    // If auto test is configured then set the timeout for disconnect.
    if (settings.autoTest) {
      timeout = setTimeout(function () {
        timeout = null;
        onDisconnect();
      }, settings.duration);
    }
  });
