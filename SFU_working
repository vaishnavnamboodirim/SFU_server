var streamHandler = null;
streamHandler = new StreamHandler(settings.mode, config, createViewer);
function initConfig() {
  config.url = document.getElementById("input-url").value;
  config.fps = parseInt(document.getElementById("input-fps").value);
  let selectedIndex = document.getElementById("select-source").selectedIndex;
  config.mode =
    document.getElementById("select-source").options[selectedIndex].value;
  config.window = document.getElementById("input-window").value;
  config.captureMouse = document.getElementById("check-capture-mouse").checked;
  settings.autoTest = document.getElementById("check-timeout").checked;

  console.log("[info] " + config);
}

function createViewer(type) {
  if (type === "default" || type === "") {
    let viewer = new Viewer(document.getElementById("canvas-view"));
    return viewer;
  }

  if (type === "h264" || type === "avc") {
    //let viewer = new VideoPlayer(document.getElementById("video-view"));
    //return viewer;
    return null;
  }
}

var settings = {
  /** Viewer mode possible values are 'none'. 'fill', or 'contain' */
  mode: "contain",

  /** Indicates banner is needed or not */
  banner: true,

  /** Run in auto test mode */
  autoTest: false,

  /** Duration for auto test, valid only in auto test mode */
  duration: 60000,
};
